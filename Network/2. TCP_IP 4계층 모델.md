# TCP/IP 4계층 모델  

![tcp_ip_5](https://user-images.githubusercontent.com/61510481/210701734-ba077630-758d-46e9-8921-bda79ba80b58.png)  

TCP/IP 계층은 애플리케이션 계층, 전송 계층, 인터넷 계층, 링크(네트워크 엑세스) 계층으로 나눌 수 있으며,
이 계층들은 특정 계층이 변경 되었을 때 다른 계층에 영향을 받지 않도록 설계 되어있다.  
<br>

## 1. 애플리케이션 계층
- 애플리케이션 계층은 FTP, HTTP, SSH, SMTP, DNS 등 서버나 클라이언트 응용프로그램이 사용되는 계층
- 웹서비스나 이메일 등 서비스를 실질적으로 사람들에게 제공하는 계층
    ### 애플리케이션 계층 관련 용어
    - FTP : 장치간 파일을 전송하는 데 사용되는 표준 프로토콜
    - SSH : 보안되지 않은 네트워크에서 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜
    - HTTP : World Wide Web을 위한 데이터 통신의 기초이자 웹사이트를 이용하는 데 쓰는 프로토콜
    - SMTP : 잔자 메일 전송을 위한 표준 통신 프로토콜
    - DNS : 도메인 이름과 IP 주소를 매핑 해주는 서버
<br>

## 2. 전송 계층
- 애플리케이션과 인터넷 계층 사이의 데이터가 전달 될 때 중계 역할
- 송신자와 수신자를 연결하는 통신 서비스 제공
- 연결 지향 데이터 스트림 지원, 신뢰성, 흐름제어 제공
- 대표적으로 TCP 와 UDP 가 있음
![tcp_udp](https://user-images.githubusercontent.com/61510481/210697364-64f2ccbd-d642-4c7a-8879-fe88fc01c82b.png)  

    ### TCP
    - 연결지향 프로토콜 사용
    - 패킷 사이의 순서 보장
    - 수신 여부를 확인해 신뢰성 보장
    - 가상회선 패킷 교환 방식 사용  
        : 각 패킷에 가상 회신 식별자가 포함되며, 모든 패킷을 전송하면 가상회선이 해제되고 전송된 순서대로 도착하는 방식

    ### UDP
    - 패킷 사이의 순서 보장하지 않음
    - 수신 여부를 확인 하지 않기 때문에 신뢰성 부족
    - 데이터그램 패킷 교환 방식 사용  
        : 각 패킷은 최적의 경로를 선책하여 독립적으로 이동하기 때문에 하나의 메세지에서 분할된 패킷이 서로 다른 경로로 전송될 수 있어 순서가 보장되징 않는다
<br>

## 3. 인터넷 계층
- 장치로 부터 받은 네트워크 패킷을 논리적 주소인 IP 주소로 목적지까지 전송하기 위해 사용되는 계층.
- 패킷을 수신해야 할 상대의 주소를 지정하여 데이터를 전달
- 상대방이 제대로 수신 했는지에 대해 보장하지 않는 비연결성 특징을 가짐
<br>

## 4. 링크계층(네트워크 엑세스 계층) 
- 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치간의 신호를 주고받는 규칙을 정하는 계층
- 네트워크 엑세스(접근) 계층 이라고도 불림
    ### 이더넷 프레임
    - 데이터링크 계층은 이더넷 프레임을 통해 전달 받은 데이터의 에러를 검출하고 캡슐화 하며 다음과 같은 구조를 가진다
    ![ethernet frame](https://user-images.githubusercontent.com/61510481/210697064-e7d45c33-a6a7-455b-9430-c848aeef3f49.jpg)  
    

    ### 유선 LAN
    - 유선 LAN을 이루는 이더넷은 IEEE802.3 프로토콜을 따르며 전이중화 통신을 사용
        - 전이중화 통신   
        : 양쪽 장치가 동시에 송수신 할 수 있는 방식으로 송신로와 수신로를 나눠서 데이터를 주고 받는 방식
        - CSMA/CD  
        : 전이중화 통신 방식 이전의 방식으로, 반이중화 통신 중 하나. 데이터를 보낸 이후 충돌이 발생하면 일정 시간 이후 다시 전송하는 방식  
        
    - 유선 LAN은 TP케이블 이라고 하는 트위스트 페어 케이블과 광섬유 케이블을 주로 사용
        - 트위스트 페어 케이블  
        : 여덟개의 구리선을 두개씩 꼬아서 묶은 케이블 구리선의 실드 처리 여부로 UTP, STP로 나뉜다. UTP 케이블을 흔히 볼 수 있으며 LAN 케이블이라고 한다.
        - 광섬유 케이블  
        : 레이저를 이용해서 통신하기 때문에 장거리 및 고속 통신이 가능하다. 빛이 내부에서 반사하며 전진하여 반대편 까지 가는 원리. 코어와 클래딩으로 이루어짐
  
    ### 무선 LAN
    - 수신과 송신에 같은 채널을 사용하기 때문에 반이중화 통신 방식 사용
        - 반이중화 통신  
        : 양쪽 장치는 서로 통신 할 수 있지만, 동시에 통신은 할 수 없음, 충돌 방지 시스템 필요
        - CSMA/CA  
        : 반이중화 통신 방식 중 하나로 장치에서 데이터를 보내기 전에 캐리어 감지 등으로 사전에 충돌을 방지하는 방식
    - 무선 LAN은 2.4GHz 또는 5GHz 대역 중 하나를 사용
    

<br>

## 계층 간 데이터 송수신 과정
![send_receive_process](https://user-images.githubusercontent.com/61510481/210697603-dd254e0c-1cd1-464c-8208-6d9ce2a1be88.png)  
- 데이터 송수신 과정은 다음과 같이 클라이언트 에서 서버로 각 계층을 거치며 캡슐화 되며 서버로 전송되게 된다.

    ### 캡슐화/비캡슐화
    ![encapsulation](https://user-images.githubusercontent.com/61510481/210698469-d0ff8951-bbe8-4e9f-a02d-5eb0c0040dff.png)  
    - 캡슐화 과정  
    : 상위 계층의 헤더와 데이터를 하위 계층의 데이터 부분에 포함시키고 해당 계층의 헤더를 삽입하는 과정(세그먼트화 or 데이터그램화 - 패킷화 - 프레임화)
    - 비캡슐화 과정  
    : 캡슐화의 역순으로 상위 계층으로 가면서 각 계층의 헤더를 제거하여 최종적으로 사용자에게 어플리케이션의 PDU인 메세지로 전달하는 과정  
    
    ### PDU
    - 다른 계층으로 데이터가 전달 될 때 한 덩어리의 단위를 PDU(Protocol Data Unit) 라고 하며 계층마다 부르는 명칭이 다름
    - 제어 관련 정보들이 포함된 헤더롸 데이터를 의미하는 페이로드로 구성되어 있음
    - 각 계층 별 PDU 명칭
        - 애플리케이션 계층 : 메시지
        - 전송 계층 : 세그먼트(TCP), 데이터그램(UDP)
        - 인터넷 계층 : 패킷
        - 링크 계층 : 프레임(데이터링크 계층), 비트(물리 계층)
