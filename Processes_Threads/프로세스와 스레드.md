# 프로세스와 스레드
프로세스는 컴퓨터의 실행되는 프로그램을 말한다 
CPU상의 스케줄링의 대상이 되는 작업을 뜻한다
스레드는 프로세스내 작업의 흐름을 뜻한다

사진처럼 HDD/SDD에 있는 프로그램들이 메모리(RAM)에 올라가면 프로세스가 되는 인스턴스화가 진행됩니다
그 후 운영체제의 CPU가 프로세스를 진행합니다

## 1. 프로세스와 컴파일링 과정
- 프로세스는 프로그램으로부터 인스턴스화된 것을 말합니다
- 프로그램은 컴파일러가 컴파일 과정을 커쳐 컴퓨터가 이해할수 있는 기계어로 번역되어 
실행될수있는 파일이되는것을 의미합니다 
- 컴파일러란? 컴퓨터 프로그램을 다른 언어의 동등한 프로그램으로 변환하는 프로세스입니다
- 컴파일러가 진행이 되는 과정을 컴파일 이라고 합니다
    - 컴파일은 대부분 C언어와 JABA같은 C계열 언어에서 이루어지며 코드를 한줄씩 읽어나가는 인터프리터 언어는 해당이 안됩니다
    - (인터프리터 언어 :  Python, Ruby, 자바스크립트, SQL등등)


### 1.1 전처리
- 소스코드 주석을 제거하고 헤더파일을 병합하여 매크로를 치환

### 1.2 컴파일러
- 오류 처리 코드 최적화 작업을 진행 하여 어셈블리어로 변환
- (어셈블리어 : 기계어와 일대일 대응이 되는 컴퓨터 프로그래밍의 저급 언어이다)

### 1.3 어셈블러
- 어셈블리어를 기계어 형태의 오브젝트 코드로 해석해 주는 컴퓨터 언어 번역 프로그램
- 어셈블러는 기본 컴퓨터 명령어들을, 컴퓨터 프로세서가 기본 연산을 수행하는데 사용할 수 있는 비트 패턴으로 변환시키는 프로그램
- 어셈블리어를 목적코드로 변환 시킵니다
  - (목적코드 : 목적코드 또는 목적파일은 컴파일러나 어셈블러가 소스 코드 파일을 컴파일 또는 어셈블러해서 생성하는 파일이다)

### 1.4 링커
- 프로그램에 있는 라이브러리 함수 또는 다른 파일을 목적코드와 결합하는 과정
- 결합 후 실행파일을 만들어냅니다
- 실행파일의 확장자는 .exe .out 이라는 확장자를 갖습니다
  - ### 1.4.1 라이브러리
  - 라이브러리는 동적 라이브러리와 정적 라이브러리노 나뉩니다
  -  **동적 라이브러리** : 완성된 프로그램을 실행할 때 포함시키는 동적 라이브러리
  -  **정적 라이브러리** : 프로그램을 컴파일하는 과정에서 포함시키는 오브젝트 파일들의 모임

## 2. 프로세스의 상태


- **생성상태** : 프로세스가 생성된 상태 fork(), exec() 함수를통해 생성 (이때 PCB할당 추후 설명)
- **준비상태** : 메모리공간이 충분하면 메모리를 할당받고 아니라면 대기하면서 CPU소유권이 넘어오길 기다리는 상태
- **준비중단상태** : 메모리부족으로 일시중단된 상태
- **실행상태** : CPU의소유권과 메모리를 할당받고 프로세스를 점유하여 명령어를 실행하는 상태
- **중단상태** : 어떤 이벤트가 발생한 진행을 기다리면서 프로세스가 차단된 상태
- **일시중단사태** : 중단된 상태에서 프로세스를 실행하려 했지만 메모리부족으로 일시중단된 상태
- **종료상태** : 프로세스 완료후 종료된 상태 2가지 형태가있다
- 자발적종료 : 프로세스 완료 후 메모리와 CPU 소유권을 놓고 종료하는 상태
- 비자발적종료 : 부모 프로세스가 자식 프로세스를 강제로 종료시키는 상태 프로세스 메모리의 한계치가 넘거나 명령어로 강제종료할때 발생

## 3. 프로세스 메모리 구조
- 운영체제는 프로세스의 적절한 메모리를 할당하는데 다음구조를 기반으로 할당합니다


위 사진처럼 위에서 부터 스텍, 힙 ,데이터영역(Bss,Data) ,코드영역 으로 나눠집니다 (스텍은 위에부터 주소가 할당되고 힙은 아래부터 주소가 할당됩니다)
### 3.1 각 영역
- **스텍** : 프로그램이 자동으로 사용하는 메모리 영역으로 함수 호출과 관계되는 지역변수와 매개변수가 저장됩니다 컴파일시 크기가 결정되며 동적인 특징을 가집니다 
  - 스텍과 힙 영역은 사실 같은 공간을 공유한다. 힙 이 메모리의 낮은 주소부터 할당되면 스텍 은 높은 주소부터 할당되는 식이다. 그래서 각 영역이 상대 공간을 침범하는 일이 발생할 수 있는데 이를 각각 stack overflow, heap overflow 라고 한다
- **힙** : 필요에 의해 메모리를 동적으로 할당할 때 사용하는 메모리 영역으로 동적 메모리 영역이라고 부릅니다
- **데이터영역** : 프로그램이 실행될때 생성되고 종료될때 시스템에 반환된다
- 전역변수 정적변수 배열 구조등이 저장된다
- Bss,Data 두가지 영역이 있다
  - BSS영역, Data영역을 구분하는 이유?
    - 초기화 된 데이터는 초기 값을 저장해야 하므로 Data 영역에 저장되어 rom에 저장된다. 하지만 초기화 되지 않은 데이터 까지 rom에 저장되면 큰 size의 rom이 필요하므로 구분한다. ( 초기화 되지 않은 데이터는 ram에 저장)

- **Text (Code) 영역**
- 실행명령을 포함한 코드들이 들어가는 영역입니다
- 읽기전용 영역이기에 프로세스가 함부로 변형을 못합니다


